<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<!-- Generated by HsColour, http://code.haskell.org/~malcolm/hscolour/ -->
<title>Numeric/Units/Dimensional.lhs</title>
<link type='text/css' rel='stylesheet' href='hscolour.css' />
</head>
<body>
Numeric.Dimensional -- Statically checked physical dimensions
Bjorn Buckwalter, bjorn.buckwalter@gmail.com
License: BSD3


= Summary =

In this module we provide data types for performing arithmetic with
physical quantities and units. Information about the physical
dimensions of the quantities/units is embedded in their types and
the validity of operations is verified by the type checker at compile
time. The boxing and unboxing of numerical values as quantities is
done by multiplication and division of units, of which an incomplete
set is provided.

We limit ourselves to "Newtonian" physics. We do not attempt to
accommodate relativistic physics in which e.g. addition of length
and time would be valid.

As far as possible and/or practical the conventions and guidelines
of NIST's "Guide for the Use of the International System of Units
(SI)" [1] are followed. Occasionally we will reference specific
sections from the guide and deviations will be explained.


= Disclaimer =

Merely an engineer, the author doubtlessly uses a language and
notation that makes mathematicians and physicist cringe. He does
not mind constructive criticism (or darcs patches).

The sets of functions and units defined herein are incomplete and
reflect only the author's needs to date. Again, patches are welcome.

The author has elected to keep the module detached from the standard(?)
Haskell library hierarchy. In part because the module name space
layout seems to be an open issue and in part because he is unsure
where to fit it in.


= Preliminaries =

This module requires GHC 6.6 or later. We utilize multi-parameter
type classes, phantom types, functional dependencies and undecidable
instances (and possibly additional unidentified GHC extensions).
Clients of the module are generally not required to use these
extensions.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-comment'>{-# LANGUAGE UndecidableInstances
<a name="line-2"></a>&gt;            , ScopedTypeVariables
<a name="line-3"></a>&gt;            , EmptyDataDecls
<a name="line-4"></a>&gt;            , MultiParamTypeClasses
<a name="line-5"></a>&gt;            , FunctionalDependencies
<a name="line-6"></a>&gt;            , FlexibleInstances
<a name="line-7"></a>&gt;            , TypeSynonymInstances
<a name="line-8"></a>&gt;            , FlexibleContexts
<a name="line-9"></a>&gt;            , GeneralizedNewtypeDeriving
<a name="line-10"></a>&gt;            , DeriveDataTypeable
<a name="line-11"></a>&gt; #-}</span>
</pre>
<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-comment'>{- |
<a name="line-2"></a>&gt;    Copyright  : Copyright (C) 2006-2013 Bjorn Buckwalter
<a name="line-3"></a>&gt;    License    : BSD3
<a name="line-4"></a>&gt;
<a name="line-5"></a>&gt;    Maintainer : bjorn.buckwalter@gmail.com
<a name="line-6"></a>&gt;    Stability  : Stable
<a name="line-7"></a>&gt;    Portability: GHC only?
<a name="line-8"></a>&gt;
<a name="line-9"></a>&gt; Please refer to the literate Haskell code for documentation of both API
<a name="line-10"></a>&gt; and implementation.
<a name="line-11"></a>&gt; -}</span>
</pre>
<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>module</span> <span class='hs-conid'>Numeric</span><span class='hs-varop'>.</span><span class='hs-conid'>Units</span><span class='hs-varop'>.</span><span class='hs-conid'>Dimensional</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>       <span class='hs-comment'>-- TODO discriminate exports, in particular Variants and Dims.</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>   <span class='hs-keyword'>where</span>
</pre>
<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-conid'>Prelude</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>(</span> <span class='hs-conid'>Show</span><span class='hs-layout'>,</span> <span class='hs-conid'>Eq</span><span class='hs-layout'>,</span> <span class='hs-conid'>Ord</span><span class='hs-layout'>,</span> <span class='hs-conid'>Enum</span><span class='hs-layout'>,</span> <span class='hs-conid'>Num</span><span class='hs-layout'>,</span> <span class='hs-conid'>Fractional</span><span class='hs-layout'>,</span> <span class='hs-conid'>Floating</span><span class='hs-layout'>,</span> <span class='hs-conid'>RealFloat</span><span class='hs-layout'>,</span> <span class='hs-conid'>Functor</span><span class='hs-layout'>,</span> <span class='hs-varid'>fmap</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-layout'>(</span><span class='hs-varop'>.</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span> <span class='hs-varid'>flip</span><span class='hs-layout'>,</span> <span class='hs-varid'>show</span><span class='hs-layout'>,</span> <span class='hs-layout'>(</span><span class='hs-varop'>++</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span> <span class='hs-varid'>undefined</span><span class='hs-layout'>,</span> <span class='hs-varid'>otherwise</span><span class='hs-layout'>,</span> <span class='hs-layout'>(</span><span class='hs-varop'>==</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span> <span class='hs-conid'>String</span><span class='hs-layout'>,</span> <span class='hs-varid'>unwords</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-varid'>map</span><span class='hs-layout'>,</span> <span class='hs-varid'>foldr</span><span class='hs-layout'>,</span> <span class='hs-varid'>null</span><span class='hs-layout'>,</span> <span class='hs-conid'>Integer</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>)</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-keyword'>qualified</span> <span class='hs-conid'>Prelude</span>
<a name="line-7"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>List</span> <span class='hs-layout'>(</span><span class='hs-varid'>genericLength</span><span class='hs-layout'>)</span>
<a name="line-8"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>Maybe</span> <span class='hs-layout'>(</span><span class='hs-conid'>Maybe</span> <span class='hs-layout'>(</span><span class='hs-conid'>Just</span><span class='hs-layout'>,</span> <span class='hs-conid'>Nothing</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span> <span class='hs-varid'>catMaybes</span><span class='hs-layout'>)</span>
<a name="line-9"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>Typeable</span> <span class='hs-layout'>(</span><span class='hs-conid'>Typeable</span><span class='hs-layout'>)</span>
<a name="line-10"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-conid'>Numeric</span><span class='hs-varop'>.</span><span class='hs-conid'>NumType</span>
<a name="line-11"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>(</span> <span class='hs-conid'>NumType</span><span class='hs-layout'>,</span> <span class='hs-conid'>NonZero</span><span class='hs-layout'>,</span> <span class='hs-conid'>PosType</span><span class='hs-layout'>,</span> <span class='hs-conid'>Zero</span><span class='hs-layout'>,</span> <span class='hs-varid'>toNum</span><span class='hs-layout'>,</span> <span class='hs-conid'>Sum</span>
<a name="line-12"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-conid'>Pos1</span><span class='hs-layout'>,</span> <span class='hs-conid'>Pos2</span><span class='hs-layout'>,</span> <span class='hs-varid'>pos2</span><span class='hs-layout'>,</span> <span class='hs-conid'>Pos3</span><span class='hs-layout'>,</span> <span class='hs-varid'>pos3</span>
<a name="line-13"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>)</span>
<a name="line-14"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>import</span> <span class='hs-keyword'>qualified</span> <span class='hs-conid'>Numeric</span><span class='hs-varop'>.</span><span class='hs-conid'>NumType</span> <span class='hs-keyword'>as</span> <span class='hs-conid'>N</span> <span class='hs-layout'>(</span><span class='hs-conid'>Mul</span><span class='hs-layout'>,</span> <span class='hs-conid'>Div</span><span class='hs-layout'>)</span>
</pre>
We will reuse the operators and function names from the Prelude.
To prevent unpleasant surprises we give operators the same fixity
as the Prelude.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>infixr</span> <span class='hs-num'>8</span>  <span class='hs-varop'>^</span><span class='hs-layout'>,</span> <span class='hs-varop'>^+</span><span class='hs-layout'>,</span> <span class='hs-varop'>^/</span><span class='hs-layout'>,</span> <span class='hs-varop'>**</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>infixl</span> <span class='hs-num'>7</span>  <span class='hs-varop'>*</span><span class='hs-layout'>,</span> <span class='hs-varop'>/</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>infixl</span> <span class='hs-num'>6</span>  <span class='hs-varop'>+</span><span class='hs-layout'>,</span> <span class='hs-comment'>-</span>
</pre>

= Dimensional =

Our primary objective is to define a data type that can be used to
represent (while still differentiating between) units and quantities.
There are two reasons for consolidating units and quantities in one
data type. The first being to allow code reuse as they are largely
subject to the same operations. The second being that it allows
reuse of operators (and functions) between the two without resorting
to occasionally cumbersome type classes.

We call this data type 'Dimensional' to capture the notion that the
units and quantities it represents have physical dimensions.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>newtype</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>a</span> <span class='hs-keyword'>deriving</span> <span class='hs-layout'>(</span><span class='hs-conid'>Eq</span><span class='hs-layout'>,</span> <span class='hs-conid'>Ord</span><span class='hs-layout'>,</span> <span class='hs-conid'>Enum</span><span class='hs-layout'>,</span> <span class='hs-conid'>Typeable</span><span class='hs-layout'>)</span>
</pre>
The type variable 'a' is the only non-phantom type variable and
represents the numerical value of a quantity or the scale (w.r.t.
SI units) of a unit. For SI units the scale will always be 1. For
non-SI units the scale is the ratio of the unit to the SI unit with
the same physical dimension.

Since 'a' is the only non-phantom type we were able to define
'Dimensional' as a newtype, avoiding boxing at runtime.


= The variety 'v' of 'Dimensional' =

The phantom type variable v is used to distinguish between units
and quantities. It should be one of the following:

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>data</span> <span class='hs-conid'>DUnit</span> <span class='hs-keyword'>deriving</span> <span class='hs-conid'>Typeable</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>data</span> <span class='hs-conid'>DQuantity</span> <span class='hs-keyword'>deriving</span> <span class='hs-conid'>Typeable</span>
</pre>
For convenience we define type synonyms for units and quantities.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>Unit</span>     <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-conid'>DUnit</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>Quantity</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-conid'>DQuantity</span>
</pre>
The relationship between (the value of) a 'Quantity', its numerical
value and its 'Unit' is described in 7.1 "Value and numerical value
of a quantity" of [1]. In short a 'Quantity' is the product of a
number and a 'Unit'. We define the '(*~)' operator as a convenient
way to declare quantities as such a product.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-layout'>(</span><span class='hs-varop'>*~</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Num</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Unit</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>x</span> <span class='hs-varop'>*~</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>y</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-layout'>(</span><span class='hs-varid'>x</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.*</span> <span class='hs-varid'>y</span><span class='hs-layout'>)</span>
</pre>
Conversely, the numerical value of a 'Quantity' is obtained by
dividing the 'Quantity' by its 'Unit' (any unit with the same
physical dimension). The '(/~)' operator provides a convenient way
of obtaining the numerical value of a quantity.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-layout'>(</span><span class='hs-varop'>/~</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Fractional</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Unit</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>x</span> <span class='hs-varop'>/~</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>y</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>x</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>./</span> <span class='hs-varid'>y</span>
</pre>
We give '*~' and '/~' the same fixity as '*' and '/' defined below.
Note that this necessitates the use of parenthesis when composing
units using '*' and '/', e.g. "1 *~ (meter / second)".

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>infixl</span> <span class='hs-num'>7</span>  <span class='hs-varop'>*~</span><span class='hs-layout'>,</span> <span class='hs-varop'>/~</span>
</pre>

= The dimension 'd' of 'Dimensional' =

The phantom type variable d encompasses the physical dimension of
the 'Dimensional'. As detailed in [5] there are seven base dimensions,
which can be combined in integer powers to a given physical dimension.
We represent physical dimensions as the powers of the seven base
dimensions that make up the given dimension. The powers are represented
using NumTypes. For convenience we collect all seven base dimensions
in a data type 'Dim'.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>data</span> <span class='hs-conid'>Dim</span> <span class='hs-varid'>l</span> <span class='hs-varid'>m</span> <span class='hs-varid'>t</span> <span class='hs-varid'>i</span> <span class='hs-varid'>th</span> <span class='hs-varid'>n</span> <span class='hs-varid'>j</span> <span class='hs-keyword'>deriving</span> <span class='hs-conid'>Typeable</span>
</pre>
where the respective dimensions are represented by type variables
using the following convention.

    l  -- Length
    m  -- Mass
    t  -- Time
    i  -- Electric current
    th -- Thermodynamic temperature
    n  -- Amount of substance
    j  -- Luminous intensity

We could have chosen to provide type variables for the seven base
dimensions in 'Dimensional' instead of creating a new data type
'Dim'. However, that would have made any type signatures involving
'Dimensional' very cumbersome.  By encompassing the physical dimension
in a single type variable we can "hide" the cumbersome type arithmetic
behind convenient type classes as will be seen later.

Using our 'Dim' data type we define some type synonyms for convenience
and illustrative purposes. We start with the base dimensions.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>DOne</span>         <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dim</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>DLength</span>      <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dim</span> <span class='hs-conid'>Pos1</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>DMass</span>        <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dim</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Pos1</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>DTime</span>        <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dim</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Pos1</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>DElectricCurrent</span>          <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dim</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Pos1</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>DThermodynamicTemperature</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dim</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Pos1</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span>
<a name="line-7"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>DAmountOfSubstance</span>        <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dim</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Pos1</span> <span class='hs-conid'>Zero</span>
<a name="line-8"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>DLuminousIntensity</span>        <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dim</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Zero</span> <span class='hs-conid'>Pos1</span>
</pre>
Using the above type synonyms we can define type synonyms for
quantities of particular physical dimensions.

Quantities with the base dimensions.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>Dimensionless</span>            <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Quantity</span> <span class='hs-conid'>DOne</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>Length</span>                   <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Quantity</span> <span class='hs-conid'>DLength</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>Mass</span>                     <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Quantity</span> <span class='hs-conid'>DMass</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>Time</span>                     <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Quantity</span> <span class='hs-conid'>DTime</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>ElectricCurrent</span>          <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Quantity</span> <span class='hs-conid'>DElectricCurrent</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>ThermodynamicTemperature</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Quantity</span> <span class='hs-conid'>DThermodynamicTemperature</span>
<a name="line-7"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>AmountOfSubstance</span>        <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Quantity</span> <span class='hs-conid'>DAmountOfSubstance</span>
<a name="line-8"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>LuminousIntensity</span>        <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Quantity</span> <span class='hs-conid'>DLuminousIntensity</span>
</pre>

= Arithmetic on physical dimensions =

When performing arithmetic on units and quantities the arithmetics
must be applied to both the numerical values of the Dimensionals
but also to their physical dimensions. The type level arithmetic
on physical dimensions is governed by multi-parameter type classes
and functional dependences.

Multiplication of dimensions corresponds to adding of the base
dimensions' exponents.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>class</span> <span class='hs-conid'>Mul</span> <span class='hs-varid'>d</span> <span class='hs-varid'>d'</span> <span class='hs-varid'>d''</span> <span class='hs-keyglyph'>|</span> <span class='hs-varid'>d</span> <span class='hs-varid'>d'</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>d''</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>instance</span> <span class='hs-layout'>(</span><span class='hs-conid'>Sum</span> <span class='hs-varid'>l</span>  <span class='hs-varid'>l'</span>  <span class='hs-varid'>l''</span><span class='hs-layout'>,</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>Sum</span> <span class='hs-varid'>m</span>  <span class='hs-varid'>m'</span>  <span class='hs-varid'>m''</span><span class='hs-layout'>,</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>Sum</span> <span class='hs-varid'>t</span>  <span class='hs-varid'>t'</span>  <span class='hs-varid'>t''</span><span class='hs-layout'>,</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>Sum</span> <span class='hs-varid'>i</span>  <span class='hs-varid'>i'</span>  <span class='hs-varid'>i''</span><span class='hs-layout'>,</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>Sum</span> <span class='hs-varid'>th</span> <span class='hs-varid'>th'</span> <span class='hs-varid'>th''</span><span class='hs-layout'>,</span>
<a name="line-7"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>Sum</span> <span class='hs-varid'>n</span>  <span class='hs-varid'>n'</span>  <span class='hs-varid'>n''</span><span class='hs-layout'>,</span>
<a name="line-8"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>Sum</span> <span class='hs-varid'>j</span>  <span class='hs-varid'>j'</span>  <span class='hs-varid'>j''</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Mul</span> <span class='hs-layout'>(</span><span class='hs-conid'>Dim</span> <span class='hs-varid'>l</span>   <span class='hs-varid'>m</span>   <span class='hs-varid'>t</span>   <span class='hs-varid'>i</span>   <span class='hs-varid'>th</span>   <span class='hs-varid'>n</span>   <span class='hs-varid'>j</span><span class='hs-layout'>)</span>
<a name="line-9"></a><span class='hs-varop'>&gt;</span>                                  <span class='hs-layout'>(</span><span class='hs-conid'>Dim</span> <span class='hs-varid'>l'</span>  <span class='hs-varid'>m'</span>  <span class='hs-varid'>t'</span>  <span class='hs-varid'>i'</span>  <span class='hs-varid'>th'</span>  <span class='hs-varid'>n'</span>  <span class='hs-varid'>j'</span><span class='hs-layout'>)</span>
<a name="line-10"></a><span class='hs-varop'>&gt;</span>                                  <span class='hs-layout'>(</span><span class='hs-conid'>Dim</span> <span class='hs-varid'>l''</span> <span class='hs-varid'>m''</span> <span class='hs-varid'>t''</span> <span class='hs-varid'>i''</span> <span class='hs-varid'>th''</span> <span class='hs-varid'>n''</span> <span class='hs-varid'>j''</span><span class='hs-layout'>)</span>
</pre>
Division of dimensions corresponds to subtraction of the base
dimensions' exponents.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>class</span> <span class='hs-conid'>Div</span> <span class='hs-varid'>d</span> <span class='hs-varid'>d'</span> <span class='hs-varid'>d''</span> <span class='hs-keyglyph'>|</span> <span class='hs-varid'>d</span> <span class='hs-varid'>d'</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>d''</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>instance</span> <span class='hs-layout'>(</span><span class='hs-conid'>Sum</span> <span class='hs-varid'>l</span>  <span class='hs-varid'>l'</span>  <span class='hs-varid'>l''</span><span class='hs-layout'>,</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>Sum</span> <span class='hs-varid'>m</span>  <span class='hs-varid'>m'</span>  <span class='hs-varid'>m''</span><span class='hs-layout'>,</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>Sum</span> <span class='hs-varid'>t</span>  <span class='hs-varid'>t'</span>  <span class='hs-varid'>t''</span><span class='hs-layout'>,</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>Sum</span> <span class='hs-varid'>i</span>  <span class='hs-varid'>i'</span>  <span class='hs-varid'>i''</span><span class='hs-layout'>,</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>Sum</span> <span class='hs-varid'>th</span> <span class='hs-varid'>th'</span> <span class='hs-varid'>th''</span><span class='hs-layout'>,</span>
<a name="line-7"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>Sum</span> <span class='hs-varid'>n</span>  <span class='hs-varid'>n'</span>  <span class='hs-varid'>n''</span><span class='hs-layout'>,</span>
<a name="line-8"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>Sum</span> <span class='hs-varid'>j</span>  <span class='hs-varid'>j'</span>  <span class='hs-varid'>j''</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Div</span> <span class='hs-layout'>(</span><span class='hs-conid'>Dim</span> <span class='hs-varid'>l''</span> <span class='hs-varid'>m''</span> <span class='hs-varid'>t''</span> <span class='hs-varid'>i''</span> <span class='hs-varid'>th''</span> <span class='hs-varid'>n''</span> <span class='hs-varid'>j''</span><span class='hs-layout'>)</span>
<a name="line-9"></a><span class='hs-varop'>&gt;</span>                                  <span class='hs-layout'>(</span><span class='hs-conid'>Dim</span> <span class='hs-varid'>l'</span>  <span class='hs-varid'>m'</span>  <span class='hs-varid'>t'</span>  <span class='hs-varid'>i'</span>  <span class='hs-varid'>th'</span>  <span class='hs-varid'>n'</span>  <span class='hs-varid'>j'</span><span class='hs-layout'>)</span>
<a name="line-10"></a><span class='hs-varop'>&gt;</span>                                  <span class='hs-layout'>(</span><span class='hs-conid'>Dim</span> <span class='hs-varid'>l</span>   <span class='hs-varid'>m</span>   <span class='hs-varid'>t</span>   <span class='hs-varid'>i</span>   <span class='hs-varid'>th</span>   <span class='hs-varid'>n</span>   <span class='hs-varid'>j</span><span class='hs-layout'>)</span>
</pre>
We could provide the 'Mul' and 'Div' classes with full functional
dependencies but that would be of limited utility as there is no
obvious use for "backwards" type inference and would also limit
what we can achieve overlapping instances. (In particular, it breaks
the 'Extensible' module.)

We limit ourselves to integer powers of Dimensionals as fractional
powers make little physical sense. Since the value of the exponent
affects the type of the result the value of the exponent must be
visible to the type system, therefore we will generally represent
the exponent with a 'NumType'.

Powers of dimensions corresponds to multiplication of the base
dimensions' exponents by the exponent.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>class</span> <span class='hs-layout'>(</span><span class='hs-conid'>NumType</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Pow</span> <span class='hs-varid'>d</span> <span class='hs-varid'>x</span> <span class='hs-varid'>d'</span> <span class='hs-keyglyph'>|</span> <span class='hs-varid'>d</span> <span class='hs-varid'>x</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>d'</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>instance</span> <span class='hs-layout'>(</span><span class='hs-conid'>N</span><span class='hs-varop'>.</span><span class='hs-conid'>Mul</span> <span class='hs-varid'>l</span>  <span class='hs-varid'>x</span> <span class='hs-varid'>l'</span><span class='hs-layout'>,</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>N</span><span class='hs-varop'>.</span><span class='hs-conid'>Mul</span> <span class='hs-varid'>m</span>  <span class='hs-varid'>x</span> <span class='hs-varid'>m'</span><span class='hs-layout'>,</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>N</span><span class='hs-varop'>.</span><span class='hs-conid'>Mul</span> <span class='hs-varid'>t</span>  <span class='hs-varid'>x</span> <span class='hs-varid'>t'</span><span class='hs-layout'>,</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>N</span><span class='hs-varop'>.</span><span class='hs-conid'>Mul</span> <span class='hs-varid'>i</span>  <span class='hs-varid'>x</span> <span class='hs-varid'>i'</span><span class='hs-layout'>,</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>N</span><span class='hs-varop'>.</span><span class='hs-conid'>Mul</span> <span class='hs-varid'>th</span> <span class='hs-varid'>x</span> <span class='hs-varid'>th'</span><span class='hs-layout'>,</span>
<a name="line-7"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>N</span><span class='hs-varop'>.</span><span class='hs-conid'>Mul</span> <span class='hs-varid'>n</span>  <span class='hs-varid'>x</span> <span class='hs-varid'>n'</span><span class='hs-layout'>,</span>
<a name="line-8"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>N</span><span class='hs-varop'>.</span><span class='hs-conid'>Mul</span> <span class='hs-varid'>j</span>  <span class='hs-varid'>x</span> <span class='hs-varid'>j'</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Pow</span> <span class='hs-layout'>(</span><span class='hs-conid'>Dim</span> <span class='hs-varid'>l</span>  <span class='hs-varid'>m</span>  <span class='hs-varid'>t</span>  <span class='hs-varid'>i</span>  <span class='hs-varid'>th</span>  <span class='hs-varid'>n</span>  <span class='hs-varid'>j</span><span class='hs-layout'>)</span> <span class='hs-varid'>x</span>
<a name="line-9"></a><span class='hs-varop'>&gt;</span>                                 <span class='hs-layout'>(</span><span class='hs-conid'>Dim</span> <span class='hs-varid'>l'</span> <span class='hs-varid'>m'</span> <span class='hs-varid'>t'</span> <span class='hs-varid'>i'</span> <span class='hs-varid'>th'</span> <span class='hs-varid'>n'</span> <span class='hs-varid'>j'</span><span class='hs-layout'>)</span>
</pre>
Roots of dimensions corresponds to division of the base dimensions'
exponents by order(?) of the root.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>class</span> <span class='hs-layout'>(</span><span class='hs-conid'>NonZero</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Root</span> <span class='hs-varid'>d</span> <span class='hs-varid'>x</span> <span class='hs-varid'>d'</span> <span class='hs-keyglyph'>|</span> <span class='hs-varid'>d</span> <span class='hs-varid'>x</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>d'</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>instance</span> <span class='hs-layout'>(</span><span class='hs-conid'>N</span><span class='hs-varop'>.</span><span class='hs-conid'>Div</span> <span class='hs-varid'>l</span>  <span class='hs-varid'>x</span> <span class='hs-varid'>l'</span><span class='hs-layout'>,</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>N</span><span class='hs-varop'>.</span><span class='hs-conid'>Div</span> <span class='hs-varid'>m</span>  <span class='hs-varid'>x</span> <span class='hs-varid'>m'</span><span class='hs-layout'>,</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>N</span><span class='hs-varop'>.</span><span class='hs-conid'>Div</span> <span class='hs-varid'>t</span>  <span class='hs-varid'>x</span> <span class='hs-varid'>t'</span><span class='hs-layout'>,</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>N</span><span class='hs-varop'>.</span><span class='hs-conid'>Div</span> <span class='hs-varid'>i</span>  <span class='hs-varid'>x</span> <span class='hs-varid'>i'</span><span class='hs-layout'>,</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>N</span><span class='hs-varop'>.</span><span class='hs-conid'>Div</span> <span class='hs-varid'>th</span> <span class='hs-varid'>x</span> <span class='hs-varid'>th'</span><span class='hs-layout'>,</span>
<a name="line-7"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>N</span><span class='hs-varop'>.</span><span class='hs-conid'>Div</span> <span class='hs-varid'>n</span>  <span class='hs-varid'>x</span> <span class='hs-varid'>n'</span><span class='hs-layout'>,</span>
<a name="line-8"></a><span class='hs-varop'>&gt;</span>           <span class='hs-conid'>N</span><span class='hs-varop'>.</span><span class='hs-conid'>Div</span> <span class='hs-varid'>j</span>  <span class='hs-varid'>x</span> <span class='hs-varid'>j'</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Root</span> <span class='hs-layout'>(</span><span class='hs-conid'>Dim</span> <span class='hs-varid'>l</span>  <span class='hs-varid'>m</span>  <span class='hs-varid'>t</span>  <span class='hs-varid'>i</span>  <span class='hs-varid'>th</span>  <span class='hs-varid'>n</span>  <span class='hs-varid'>j</span><span class='hs-layout'>)</span> <span class='hs-varid'>x</span>
<a name="line-9"></a><span class='hs-varop'>&gt;</span>                                  <span class='hs-layout'>(</span><span class='hs-conid'>Dim</span> <span class='hs-varid'>l'</span> <span class='hs-varid'>m'</span> <span class='hs-varid'>t'</span> <span class='hs-varid'>i'</span> <span class='hs-varid'>th'</span> <span class='hs-varid'>n'</span> <span class='hs-varid'>j'</span><span class='hs-layout'>)</span>
</pre>

= Arithmetic on units and quantities =

Thanks to the arithmetic on physical dimensions having been sorted
out separately a lot of the arithmetic on Dimensionals is straight
forward. In particular the type signatures are much simplified.

Multiplication, division and powers apply to both units and quantities.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-layout'>(</span><span class='hs-varop'>*</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>,</span> <span class='hs-conid'>Mul</span> <span class='hs-varid'>d</span> <span class='hs-varid'>d'</span> <span class='hs-varid'>d''</span><span class='hs-layout'>)</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>     <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d'</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d''</span> <span class='hs-varid'>a</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>x</span> <span class='hs-varop'>*</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>y</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-layout'>(</span><span class='hs-varid'>x</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.*</span> <span class='hs-varid'>y</span><span class='hs-layout'>)</span>
</pre>
<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-layout'>(</span><span class='hs-varop'>/</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Fractional</span> <span class='hs-varid'>a</span><span class='hs-layout'>,</span> <span class='hs-conid'>Div</span> <span class='hs-varid'>d</span> <span class='hs-varid'>d'</span> <span class='hs-varid'>d''</span><span class='hs-layout'>)</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>     <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d'</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d''</span> <span class='hs-varid'>a</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>x</span> <span class='hs-varop'>/</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>y</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-layout'>(</span><span class='hs-varid'>x</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>./</span> <span class='hs-varid'>y</span><span class='hs-layout'>)</span>
</pre>
<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-layout'>(</span><span class='hs-varop'>^</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Fractional</span> <span class='hs-varid'>a</span><span class='hs-layout'>,</span> <span class='hs-conid'>Pow</span> <span class='hs-varid'>d</span> <span class='hs-varid'>n</span> <span class='hs-varid'>d'</span><span class='hs-layout'>)</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>     <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>n</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d'</span> <span class='hs-varid'>a</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>x</span> <span class='hs-varop'>^</span> <span class='hs-varid'>n</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-layout'>(</span><span class='hs-varid'>x</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.^^</span> <span class='hs-layout'>(</span><span class='hs-varid'>toNum</span> <span class='hs-varid'>n</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Integer</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
</pre>
In the unlikely case someone needs to use this library with
non-fractional numbers we provide the alternative power operator
'^+' that is restricted to positive exponents.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-layout'>(</span><span class='hs-varop'>^+</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>,</span> <span class='hs-conid'>PosType</span> <span class='hs-varid'>n</span><span class='hs-layout'>,</span> <span class='hs-conid'>Pow</span> <span class='hs-varid'>d</span> <span class='hs-varid'>n</span> <span class='hs-varid'>d'</span><span class='hs-layout'>)</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>      <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>n</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d'</span> <span class='hs-varid'>a</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>x</span> <span class='hs-varop'>^+</span> <span class='hs-varid'>n</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-layout'>(</span><span class='hs-varid'>x</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.^</span> <span class='hs-layout'>(</span><span class='hs-varid'>toNum</span> <span class='hs-varid'>n</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Integer</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
</pre>
A special case is that dimensionless quantities are not restricted
to integer exponents. This is accommodated by the '**' operator
defined later.


= Quantity operations =

Some additional operations obviously only make sense for quantities.
Of these, negation, addition and subtraction are particularly simple
as they are done in a single physical dimension.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>negate</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>negate</span> <span class='hs-layout'>(</span><span class='hs-conid'>Dimensional</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-layout'>(</span><span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>negate</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span>
</pre>
<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-layout'>(</span><span class='hs-varop'>+</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>x</span> <span class='hs-varop'>+</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>y</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-layout'>(</span><span class='hs-varid'>x</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.+</span> <span class='hs-varid'>y</span><span class='hs-layout'>)</span>
</pre>
<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-layout'>(</span><span class='hs-comment'>-</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>x</span> <span class='hs-comment'>-</span> <span class='hs-varid'>y</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>x</span> <span class='hs-varop'>+</span> <span class='hs-varid'>negate</span> <span class='hs-varid'>y</span>
</pre>
Absolute value.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>abs</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>abs</span> <span class='hs-layout'>(</span><span class='hs-conid'>Dimensional</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-layout'>(</span><span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>abs</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span>
</pre>
Roots of arbitrary (integral) degree. Appears to occasionally be useful
for units as well as quantities.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>nroot</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Floating</span> <span class='hs-varid'>a</span><span class='hs-layout'>,</span> <span class='hs-conid'>Root</span> <span class='hs-varid'>d</span> <span class='hs-varid'>n</span> <span class='hs-varid'>d'</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>n</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d'</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>nroot</span> <span class='hs-varid'>n</span> <span class='hs-layout'>(</span><span class='hs-conid'>Dimensional</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-layout'>(</span><span class='hs-varid'>x</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.**</span> <span class='hs-layout'>(</span><span class='hs-num'>1</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>./</span> <span class='hs-varid'>toNum</span> <span class='hs-varid'>n</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
</pre>
We provide short-hands for the square and cubic roots.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>sqrt</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Floating</span> <span class='hs-varid'>a</span><span class='hs-layout'>,</span> <span class='hs-conid'>Root</span> <span class='hs-varid'>d</span> <span class='hs-conid'>Pos2</span> <span class='hs-varid'>d'</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d'</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>sqrt</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>nroot</span> <span class='hs-varid'>pos2</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>cbrt</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Floating</span> <span class='hs-varid'>a</span><span class='hs-layout'>,</span> <span class='hs-conid'>Root</span> <span class='hs-varid'>d</span> <span class='hs-conid'>Pos3</span> <span class='hs-varid'>d'</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d'</span> <span class='hs-varid'>a</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>cbrt</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>nroot</span> <span class='hs-varid'>pos3</span>
</pre>
We also provide an operator alternative to nroot for those that
prefer such.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-layout'>(</span><span class='hs-varop'>^/</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Floating</span> <span class='hs-varid'>a</span><span class='hs-layout'>,</span> <span class='hs-conid'>Root</span> <span class='hs-varid'>d</span> <span class='hs-varid'>n</span> <span class='hs-varid'>d'</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>n</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d'</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-layout'>(</span><span class='hs-varop'>^/</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>flip</span> <span class='hs-varid'>nroot</span>
</pre>

= List functions =

Here we define operators and functions to make working with homogenuous
lists of dimensionals more convenient.

We define two convenience operators for applying units to all
elements of a functor (e.g. a list).

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-layout'>(</span><span class='hs-varop'>*~~</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Functor</span> <span class='hs-varid'>f</span><span class='hs-layout'>,</span> <span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>f</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Unit</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>f</span> <span class='hs-layout'>(</span><span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>xs</span> <span class='hs-varop'>*~~</span> <span class='hs-varid'>u</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-layout'>(</span><span class='hs-varop'>*~</span> <span class='hs-varid'>u</span><span class='hs-layout'>)</span> <span class='hs-varid'>xs</span>
</pre>
<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-layout'>(</span><span class='hs-varop'>/~~</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Functor</span> <span class='hs-varid'>f</span><span class='hs-layout'>,</span> <span class='hs-conid'>Fractional</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>f</span> <span class='hs-layout'>(</span><span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Unit</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>f</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>xs</span> <span class='hs-varop'>/~~</span> <span class='hs-varid'>u</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-layout'>(</span><span class='hs-varop'>/~</span> <span class='hs-varid'>u</span><span class='hs-layout'>)</span> <span class='hs-varid'>xs</span>
</pre>
<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>infixl</span> <span class='hs-num'>7</span>  <span class='hs-varop'>*~~</span><span class='hs-layout'>,</span> <span class='hs-varop'>/~~</span>
</pre>
The sum of all elements in a list.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>sum</span> <span class='hs-keyglyph'>::</span> <span class='hs-keyword'>forall</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-varop'>.</span> <span class='hs-conid'>Num</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span><span class='hs-keyglyph'>]</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>sum</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>foldr</span> <span class='hs-layout'>(</span><span class='hs-varop'>+</span><span class='hs-layout'>)</span> <span class='hs-sel'>_0</span>
</pre>
The length of the list as a 'Dimensionless'. This can be useful for
purposes of e.g. calculating averages.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>dimensionlessLength</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Num</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>Dimensional</span> <span class='hs-varid'>v</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span><span class='hs-keyglyph'>]</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensionless</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>dimensionlessLength</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varop'>.</span> <span class='hs-varid'>genericLength</span>
</pre>

= Dimensionless =

For dimensionless quantities pretty much any operation is applicable.
We provide this freedom by making 'Dimensionless' an instance of
'Functor'.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>instance</span> <span class='hs-conid'>Functor</span> <span class='hs-conid'>Dimensionless</span> <span class='hs-keyword'>where</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>   <span class='hs-varid'>fmap</span> <span class='hs-varid'>f</span> <span class='hs-layout'>(</span><span class='hs-conid'>Dimensional</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-layout'>(</span><span class='hs-varid'>f</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span>
</pre>
We continue by defining elementary functions on 'Dimensionless'
that may be obviously useful.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>exp</span><span class='hs-layout'>,</span> <span class='hs-varid'>log</span><span class='hs-layout'>,</span> <span class='hs-varid'>sin</span><span class='hs-layout'>,</span> <span class='hs-varid'>cos</span><span class='hs-layout'>,</span> <span class='hs-varid'>tan</span><span class='hs-layout'>,</span> <span class='hs-varid'>asin</span><span class='hs-layout'>,</span> <span class='hs-varid'>acos</span><span class='hs-layout'>,</span> <span class='hs-varid'>atan</span><span class='hs-layout'>,</span> <span class='hs-varid'>sinh</span><span class='hs-layout'>,</span> <span class='hs-varid'>cosh</span><span class='hs-layout'>,</span> <span class='hs-varid'>tanh</span><span class='hs-layout'>,</span> <span class='hs-varid'>asinh</span><span class='hs-layout'>,</span> <span class='hs-varid'>acosh</span><span class='hs-layout'>,</span> <span class='hs-varid'>atanh</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>   <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Floating</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Dimensionless</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensionless</span> <span class='hs-varid'>a</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>exp</span>   <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>exp</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>log</span>   <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>log</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>sin</span>   <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>sin</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>cos</span>   <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>cos</span>
<a name="line-7"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>tan</span>   <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>tan</span>
<a name="line-8"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>asin</span>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>asin</span>
<a name="line-9"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>acos</span>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>acos</span>
<a name="line-10"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>atan</span>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>atan</span>
<a name="line-11"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>sinh</span>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>sinh</span>
<a name="line-12"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>cosh</span>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>cosh</span>
<a name="line-13"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>tanh</span>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>tanh</span>
<a name="line-14"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>asinh</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>asinh</span>
<a name="line-15"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>acosh</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>acosh</span>
<a name="line-16"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>atanh</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fmap</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>atanh</span>
</pre>
<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-layout'>(</span><span class='hs-varop'>**</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Floating</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>      <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Dimensionless</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensionless</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensionless</span> <span class='hs-varid'>a</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>x</span> <span class='hs-varop'>**</span> <span class='hs-conid'>Dimensional</span> <span class='hs-varid'>y</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-layout'>(</span><span class='hs-varid'>x</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.**</span> <span class='hs-varid'>y</span><span class='hs-layout'>)</span>
</pre>
For 'atan2' the operands need not be dimensionless but they must be
of the same type. The result will of course always be dimensionless.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>atan2</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>RealFloat</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>       <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Dimensionless</span> <span class='hs-varid'>a</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>atan2</span> <span class='hs-layout'>(</span><span class='hs-conid'>Dimensional</span> <span class='hs-varid'>y</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-conid'>Dimensional</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-layout'>(</span><span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>atan2</span> <span class='hs-varid'>y</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span>
</pre>
The only unit we will define in this module is 'one'. The unit one
has dimension one and is the base unit of dimensionless values. As
detailed in 7.10 "Values of quantities expressed simply as numbers:
the unit one, symbol 1" of [1] the unit one generally does not
appear in expressions. However, for us it is necessary to use 'one'
as we would any other unit to perform the "boxing" of dimensionless
values.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>one</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Num</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Unit</span> <span class='hs-conid'>DOne</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>one</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-num'>1</span>
</pre>
For convenience we define some constants for small integer values
that often show up in formulae. We also throw in 'pi' and 'tau' for
good measure.

The constant for zero is polymorphic as proposed by Douglas McClean
(http://code.google.com/p/dimensional/issues/detail?id=39) allowing
it to express zero Length or Capacitance or Velocity etc, in addition
to the dimensionless value zero.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-sel'>_0</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-sel'>_0</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-num'>0</span>
</pre>
<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-sel'>_1</span><span class='hs-layout'>,</span> <span class='hs-sel'>_2</span><span class='hs-layout'>,</span> <span class='hs-sel'>_3</span><span class='hs-layout'>,</span> <span class='hs-sel'>_4</span><span class='hs-layout'>,</span> <span class='hs-sel'>_5</span><span class='hs-layout'>,</span> <span class='hs-sel'>_6</span><span class='hs-layout'>,</span> <span class='hs-sel'>_7</span><span class='hs-layout'>,</span> <span class='hs-sel'>_8</span><span class='hs-layout'>,</span> <span class='hs-sel'>_9</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Dimensionless</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-sel'>_1</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>1</span> <span class='hs-varop'>*~</span> <span class='hs-varid'>one</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-sel'>_2</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>2</span> <span class='hs-varop'>*~</span> <span class='hs-varid'>one</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span> <span class='hs-sel'>_3</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>3</span> <span class='hs-varop'>*~</span> <span class='hs-varid'>one</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span> <span class='hs-sel'>_4</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>4</span> <span class='hs-varop'>*~</span> <span class='hs-varid'>one</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span> <span class='hs-sel'>_5</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>5</span> <span class='hs-varop'>*~</span> <span class='hs-varid'>one</span>
<a name="line-7"></a><span class='hs-varop'>&gt;</span> <span class='hs-sel'>_6</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>6</span> <span class='hs-varop'>*~</span> <span class='hs-varid'>one</span>
<a name="line-8"></a><span class='hs-varop'>&gt;</span> <span class='hs-sel'>_7</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>7</span> <span class='hs-varop'>*~</span> <span class='hs-varid'>one</span>
<a name="line-9"></a><span class='hs-varop'>&gt;</span> <span class='hs-sel'>_8</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>8</span> <span class='hs-varop'>*~</span> <span class='hs-varid'>one</span>
<a name="line-10"></a><span class='hs-varop'>&gt;</span> <span class='hs-sel'>_9</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>9</span> <span class='hs-varop'>*~</span> <span class='hs-varid'>one</span>
</pre>
For background on 'tau' see http://tauday.com/tau-manifesto (but also
feel free to review http://www.thepimanifesto.com).

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>pi</span><span class='hs-layout'>,</span> <span class='hs-varid'>tau</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Floating</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Dimensionless</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>pi</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.</span><span class='hs-varid'>pi</span> <span class='hs-varop'>*~</span> <span class='hs-varid'>one</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>tau</span> <span class='hs-keyglyph'>=</span> <span class='hs-sel'>_2</span> <span class='hs-varop'>*</span> <span class='hs-varid'>pi</span>
</pre>

= Instances of 'Show' =

We will conclude by providing a reasonable 'Show' instance for
quantities. We neglect units since it is unclear how to represent them
in a way that distinguishes them from quantities, or whether that is
even a requirement.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>instance</span> <span class='hs-keyword'>forall</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span><span class='hs-varop'>.</span> <span class='hs-layout'>(</span><span class='hs-conid'>Show</span> <span class='hs-varid'>d</span><span class='hs-layout'>,</span> <span class='hs-conid'>Show</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Show</span> <span class='hs-layout'>(</span><span class='hs-conid'>Quantity</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyword'>where</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>   <span class='hs-varid'>show</span> <span class='hs-layout'>(</span><span class='hs-conid'>Dimensional</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>show</span> <span class='hs-varid'>x</span> <span class='hs-varop'>++</span> <span class='hs-keyword'>if</span> <span class='hs-layout'>(</span><span class='hs-varid'>null</span> <span class='hs-varid'>unit</span><span class='hs-layout'>)</span> <span class='hs-keyword'>then</span> <span class='hs-str'>""</span> <span class='hs-keyword'>else</span> <span class='hs-str'>" "</span> <span class='hs-varop'>++</span> <span class='hs-varid'>unit</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>       <span class='hs-keyword'>where</span> <span class='hs-varid'>unit</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>show</span> <span class='hs-layout'>(</span><span class='hs-varid'>undefined</span> <span class='hs-keyglyph'>::</span> <span class='hs-varid'>d</span><span class='hs-layout'>)</span>
</pre>
The above implementation of 'show' relies on the dimension 'd' being an
instance of 'Show'. The "normalized" unit of the quantity can be inferred
from its dimension.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-keyword'>instance</span> <span class='hs-keyword'>forall</span> <span class='hs-varid'>l</span> <span class='hs-varid'>m</span> <span class='hs-varid'>t</span> <span class='hs-varid'>i</span> <span class='hs-varid'>th</span> <span class='hs-varid'>n</span> <span class='hs-varid'>j</span><span class='hs-varop'>.</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>(</span> <span class='hs-conid'>NumType</span> <span class='hs-varid'>l</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-conid'>NumType</span> <span class='hs-varid'>m</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-conid'>NumType</span> <span class='hs-varid'>t</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-conid'>NumType</span> <span class='hs-varid'>i</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-conid'>NumType</span> <span class='hs-varid'>th</span>
<a name="line-7"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-conid'>NumType</span> <span class='hs-varid'>n</span>
<a name="line-8"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>,</span> <span class='hs-conid'>NumType</span> <span class='hs-varid'>j</span>
<a name="line-9"></a><span class='hs-varop'>&gt;</span>   <span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Show</span> <span class='hs-layout'>(</span><span class='hs-conid'>Dim</span> <span class='hs-varid'>l</span> <span class='hs-varid'>m</span> <span class='hs-varid'>t</span> <span class='hs-varid'>i</span> <span class='hs-varid'>th</span> <span class='hs-varid'>n</span> <span class='hs-varid'>j</span><span class='hs-layout'>)</span> <span class='hs-keyword'>where</span>
<a name="line-10"></a><span class='hs-varop'>&gt;</span>   <span class='hs-varid'>show</span> <span class='hs-keyword'>_</span> <span class='hs-keyglyph'>=</span> <span class='hs-layout'>(</span><span class='hs-varid'>unwords</span> <span class='hs-varop'>.</span> <span class='hs-varid'>catMaybes</span><span class='hs-layout'>)</span>
<a name="line-11"></a><span class='hs-varop'>&gt;</span>            <span class='hs-keyglyph'>[</span> <span class='hs-varid'>dimUnit</span> <span class='hs-str'>"m"</span>   <span class='hs-layout'>(</span><span class='hs-varid'>undefined</span> <span class='hs-keyglyph'>::</span> <span class='hs-varid'>l</span><span class='hs-layout'>)</span>
<a name="line-12"></a><span class='hs-varop'>&gt;</span>            <span class='hs-layout'>,</span> <span class='hs-varid'>dimUnit</span> <span class='hs-str'>"kg"</span>  <span class='hs-layout'>(</span><span class='hs-varid'>undefined</span> <span class='hs-keyglyph'>::</span> <span class='hs-varid'>m</span><span class='hs-layout'>)</span>
<a name="line-13"></a><span class='hs-varop'>&gt;</span>            <span class='hs-layout'>,</span> <span class='hs-varid'>dimUnit</span> <span class='hs-str'>"s"</span>   <span class='hs-layout'>(</span><span class='hs-varid'>undefined</span> <span class='hs-keyglyph'>::</span> <span class='hs-varid'>t</span><span class='hs-layout'>)</span>
<a name="line-14"></a><span class='hs-varop'>&gt;</span>            <span class='hs-layout'>,</span> <span class='hs-varid'>dimUnit</span> <span class='hs-str'>"A"</span>   <span class='hs-layout'>(</span><span class='hs-varid'>undefined</span> <span class='hs-keyglyph'>::</span> <span class='hs-varid'>i</span><span class='hs-layout'>)</span>
<a name="line-15"></a><span class='hs-varop'>&gt;</span>            <span class='hs-layout'>,</span> <span class='hs-varid'>dimUnit</span> <span class='hs-str'>"K"</span>   <span class='hs-layout'>(</span><span class='hs-varid'>undefined</span> <span class='hs-keyglyph'>::</span> <span class='hs-varid'>th</span><span class='hs-layout'>)</span>
<a name="line-16"></a><span class='hs-varop'>&gt;</span>            <span class='hs-layout'>,</span> <span class='hs-varid'>dimUnit</span> <span class='hs-str'>"mol"</span> <span class='hs-layout'>(</span><span class='hs-varid'>undefined</span> <span class='hs-keyglyph'>::</span> <span class='hs-varid'>n</span><span class='hs-layout'>)</span>
<a name="line-17"></a><span class='hs-varop'>&gt;</span>            <span class='hs-layout'>,</span> <span class='hs-varid'>dimUnit</span> <span class='hs-str'>"cd"</span>  <span class='hs-layout'>(</span><span class='hs-varid'>undefined</span> <span class='hs-keyglyph'>::</span> <span class='hs-varid'>j</span><span class='hs-layout'>)</span>
<a name="line-18"></a><span class='hs-varop'>&gt;</span>            <span class='hs-keyglyph'>]</span>
</pre>
The helper function 'dimUnit' defined next conditions a 'String' (unit)
with an exponent, if appropriate. The reason we define 'dimUnit' at the
top-level rather than in the where-clause is that it may be useful for
users of the 'Extensible' module.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>dimUnit</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>NumType</span> <span class='hs-varid'>n</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>String</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>n</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Maybe</span> <span class='hs-conid'>String</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>dimUnit</span> <span class='hs-varid'>u</span> <span class='hs-varid'>n</span>
<a name="line-3"></a><span class='hs-varop'>&gt;</span>   <span class='hs-keyglyph'>|</span> <span class='hs-varid'>x</span> <span class='hs-varop'>==</span> <span class='hs-num'>0</span>    <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Nothing</span>
<a name="line-4"></a><span class='hs-varop'>&gt;</span>   <span class='hs-keyglyph'>|</span> <span class='hs-varid'>x</span> <span class='hs-varop'>==</span> <span class='hs-num'>1</span>    <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Just</span> <span class='hs-varid'>u</span>
<a name="line-5"></a><span class='hs-varop'>&gt;</span>   <span class='hs-keyglyph'>|</span> <span class='hs-varid'>otherwise</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Just</span> <span class='hs-layout'>(</span><span class='hs-varid'>u</span> <span class='hs-varop'>++</span> <span class='hs-str'>"^"</span> <span class='hs-varop'>++</span> <span class='hs-varid'>show</span> <span class='hs-varid'>x</span><span class='hs-layout'>)</span>
<a name="line-6"></a><span class='hs-varop'>&gt;</span>   <span class='hs-keyword'>where</span> <span class='hs-varid'>x</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>toNum</span> <span class='hs-varid'>n</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Integer</span>
</pre>

= The 'prefix' function =

We will define a 'prefix' function which applies a scale factor to
a unit. The 'prefix' function will be used by other modules to
define the SI prefixes and non-SI units.

<pre><a name="line-1"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>prefix</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Unit</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Unit</span> <span class='hs-varid'>d</span> <span class='hs-varid'>a</span>
<a name="line-2"></a><span class='hs-varop'>&gt;</span> <span class='hs-definition'>prefix</span> <span class='hs-varid'>x</span> <span class='hs-layout'>(</span><span class='hs-conid'>Dimensional</span> <span class='hs-varid'>y</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Dimensional</span> <span class='hs-layout'>(</span><span class='hs-varid'>x</span> <span class='hs-conid'>Prelude</span><span class='hs-varop'>.*</span> <span class='hs-varid'>y</span><span class='hs-layout'>)</span>
</pre>

= Conclusion and usage =

We have defined operators and units that allow us to define and
work with physical quantities. A physical quantity is defined by
multiplying a number with a unit (the type signature is optional).

] v :: Velocity Prelude.Double
] v = 90 *~ (kilo meter / hour)

It follows naturally that the numerical value of a quantity is
obtained by division by a unit.

] numval :: Prelude.Double
] numval = v /~ (meter / second)

The notion of a quantity as the product of a numerical value and a
unit is supported by 7.1 "Value and numerical value of a quantity" of
[1]. While the above syntax is fairly natural it is unfortunate that
it must violate a number of the guidelines in [1], in particular 9.3
"Spelling unit names with prefixes", 9.4 "Spelling unit names obtained
by multiplication", 9.5 "Spelling unit names obtained by division".

As a more elaborate example of how to use the module we define a
function for calculating the escape velocity of a celestial body
[2].

] escapeVelocity :: (Floating a) => Mass a -> Length a -> Velocity a
] escapeVelocity m r = sqrt (two * g * m / r)
]   where
]       two = 2 *~ one
]       g = 6.6720e-11 *~ (newton * meter ^ pos2 / kilo gram ^ pos2)

The following is an example GHC session where the above function
is used to calculate the escape velocity of Earth in kilometer per
second.

  *Numeric.Dimensional> :set +t
  *Numeric.Dimensional> let me = 5.9742e24 *~ kilo gram -- Mass of Earth.
  me :: Quantity DMass GHC.Float.Double
  *Numeric.Dimensional> let re = 6372.792 *~ kilo meter -- Mean radius of Earth.
  re :: Quantity DLength GHC.Float.Double
  *Numeric.Dimensional> let ve = escapeVelocity me re   -- Escape velocity of Earth.
  ve :: Velocity GHC.Float.Double
  *Numeric.Dimensional> ve /~ (kilo meter / second)
  11.184537332296259
  it :: GHC.Float.Double

For completeness we should also show an example of the error messages
we will get from GHC when performing invalid arithmetic. In the
best case GHC will be able to use the type synonyms we have defined
in its error messages.

] x = 1 *~ meter + 1 *~ second

    Couldn't match expected type `Pos1' against inferred type `Zero'
      Expected type: Unit DLength t
      Inferred type: Unit DTime a
    In the second argument of `(*~)', namely `second'
    In the second argument of `(+)', namely `1 *~ second'

In other cases the error messages aren't very friendly.

] x = 1 *~ meter / (1 *~ second) + 1 *~ kilo gram

    Couldn't match expected type `Zero'
           against inferred type `Neg Zero'
    When using functional dependencies to combine
      Sub Zero (Pos Zero) (Neg Zero),
        arising from use of `/' at Numeric/Dimensional.lhs:425:9-20
      Sub Zero (Pos Zero) Zero,
        arising from use of `/' at Numeric/Dimensional.lhs:532:5-30

It is the author's experience that the usefullness of the compiler
error messages is more often than not limited to pinpointing the
location of errors.


= Future work =

While there is an insane amount of units in use around the world
it is reasonable to provide at least all SI units. Units outside
of SI will most likely be added on an as-needed basis.

There are also plenty of elementary functions to add. The 'Floating'
class can be used as reference.

Another useful addition would be decent 'Show' and 'Read' instances.
The 'show' implementation could output the numerical value and the
unit expressed in (base?) SI units, along the lines of:

] instance (Fractional a, Show a) => Show (Length a)
]   where show x = show (x /~ meter) ++ " m"

Additional functions could be provided for "showing" with any unit
and prefix.  The 'read' implementation should be able to read values
with any unit and prefix. It is not clear to the author how to best
implement these.

Additional physics models could be implemented. See [3] for ideas.


= Related work =

Henning Thielemann numeric prelude has a physical units library,
however, checking of dimensions is dynamic rather than static.
Aaron Denney has created a toy example of statically checked
physical dimensions covering only length and time. HaskellWiki
has pointers [4] to these.

Also see Samuel Hoffstaetter's blog post [5] which uses techniques
similar to this library.

Libraries with similar functionality exist for other programming
languages and may serve as inspiration. The author has found the
Java library JScience [6] and the Fortress programming language [7]
particularly noteworthy.


= References =

[1] http://physics.nist.gov/Pubs/SP811/
[2] http://en.wikipedia.org/wiki/Escape_velocity
[3] http://jscience.org/api/org/jscience/physics/models/package-summary.html
[4] http://www.haskell.org/haskellwiki/Physical_units
[5] http://liftm.wordpress.com/2007/06/03/scientificdimension-type-arithmetic-and-physical-units-in-haskell/
[6] http://jscience.org/
[7] http://research.sun.com/projects/plrg/fortress.pdf

</body>
</html>
